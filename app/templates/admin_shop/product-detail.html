{% extends 'admin_shop/base.html' %}
{% load my_filters %}
{% block content %}
<div class="content">
    <div class="my-4">
        <h4 class='mb-4'>Th√¥ng tin s·∫£n ph·∫©m </h4>
        <div class="row">
            <div class="col-8">
                <div class="card p-4">
                    <div class="fs-5">{{product.name}}</div>
                    <div class="d-flex gap-3 my-3">
                        <div class="rating d-flex gap-1">
                            <div class='rating'>
                                {% for i in 5|times %}
                                {% if i <= product.rating %}
                                <i class="fa-solid fa-star"></i>
                                {% else %}
                                <i class="fa-regular fa-star"></i>
                                {% endif %}
                                {% endfor %}
                            </div>
                            <span>5.0</span>
                        </div>
                        <div class="total_sold">ƒê√£ b√°n: {{product.total_sold}}</div>
                    </div>

                    <div class="d-flex gap-3 mt-3">
                        <div class="price">Gi√°: {{product.price|floatformat:0|intcomma_dot}}ƒë</div>
                        {% if product.price != product.curr_price %}

                        <div class="price color-red">Gi√° khuy·∫øn m√£i: {{product.curr_price|floatformat:0|intcomma_dot}}ƒë</div>
                        {% endif %}

                    </div>
                    <div class="d-flex gap-3 mt-3 row">
                        <div class='mt-3 fs-5'>·∫¢nh s·∫£n ph·∫©m</div>
                        {% for image in product.productimage_set.all %}
                        <div class='col-2'>
                            <img class='product-detail-image' src="{{image.name.url}}" alt="" width="100">
                        </div>
                        {% endfor %}
                    </div>
                    <div>
                        <div class="description fs-5 mb-3">M√¥ t·∫£</div>
                        <div class="container-text">
                            <p class="text">üë© M√î T·∫¢ S·∫¢N PH·∫®M
                                - √Åo thun nam n·ªØ oversize s·ª≠ d·ª•ng ch·∫•t v·∫£i cotton 65/35 co gi√£n 4 chi·ªÅu. L√† lo·∫°i v·∫£i c√≥ ƒë·∫∑c ƒëi·ªÉm m·ªÅm m·ªãn, ƒë·ªô co gi√£n cao, kh·∫£ nƒÉng th·∫•m h√∫t t·ªët v√† ƒë∆∞·ª£c d·ªát ho√†n to√†n t·ª´ s·ª£i c√¢y b√¥ng t·ª± nhi√™n. Ch·∫•t v·∫£i cotton c·ª±c k·ª≥ th√¢n thi·ªán v·ªõi l√†n da.
                                - √Åo thun nam n·ªØ form r·ªông c·ªï tr√≤n tho·∫£i m√°i
                                - √Åo ph√¥ng unisex form r·ªông d·ªÖ ph·ªëi ƒë·ªì. B·∫°n c√≥ th·ªÉ ph·ªëi v·ªõi qu·∫ßn jean, ch√¢n v√°y, ‚Ä¶ k·∫øt h·ª£p v·ªõi m·ªôt ƒë√¥i sneaker cho b·∫°n t·ª± tin xu·ªëng ph·ªë

                                üì£ H∆Ø·ªöNG D·∫™N B·∫¢O QU·∫¢N √ÅO PH√îNG NAM N·ªÆ OVERSIZE VENDER Shop
                                - L·ªôn tr√°i √°o thun nam n·ªØ tay ng·∫Øn khi gi·∫∑t, kh√¥ng gi·∫∑t chung √°o thun unisex tr·∫Øng v·ªõi qu·∫ßn √°o t·ªëi m√†u.
                                - S·ª≠ d·ª•ng x√† ph√≤ng trung t√≠nh, kh√¥ng s·ª≠ d·ª•ng x√† ph√≤ng c√≥ ch·∫•t t·∫©y m·∫°nh cho √°o thun nam n·ªØ oversize.
                                - Kh√¥ng s·ª≠ d·ª•ng ch·∫•t t·∫©y, kh√¥ng ng√¢m √°o ph√¥ng unisex.
                                - Ph∆°i ngang, kh√¥ng treo m√≥c khi √°o thun unisex ∆∞·ªõt, kh√¥ng ph∆°i tr·ª±c ti·∫øp d∆∞·ªõi √°nh n·∫Øng m·∫∑t tr·ªùi.

                                Ô∏èüéØ Giao h√†ng ƒë√∫ng size, l·ªói 1 ƒë·ªïi 1
                                Ô∏èüéØ Giao COD to√†n qu·ªëc
                                Ô∏èüéØ H·ªó tr·ª£ ƒë·ªïi size v√† ƒë·ªïi m√†u trong v√≤ng 7 ng√†y k·ªÉ t·ª´ khi nh·∫≠n h√†ng, s·∫£n ph·∫©m ƒë·ªïi ph·∫£i c√≤n nguy√™n tem mac v√† ch∆∞a qua s·ª≠ d·ª•ng.
                                ‚ö†Ô∏è L∆ØU √ù: Khi m·ªü s·∫£n ph·∫©m, kh√°ch y√™u vui l√≤ng quay l·∫°i video qu√° tr√¨nh m·ªü s·∫£n ph·∫©m ƒë·ªÉ ƒë∆∞·ª£c ƒë·∫£m b·∫£o 100% ƒë·ªïi l·∫°i s·∫£n ph·∫©m m·ªõi n·∫øu √Åo thun VENDER giao b·ªã l·ªói.
                            </p>
                            <button class="expanse-text btn btn-secondary">Xem th√™m</button>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-4">
                <div class="card">
                    <div class="d-flex justify-content-center my-2 fs-5">C√°c lo·∫°i s·∫£n ph·∫©m</div>
                    <div class="px-2">
                        <table class="table p-4">
                            <thead>
                                <tr>
                                    <th>M√†u</th>
                                    <th>C·ª°</th>
                                    <th>S·ªë l∆∞·ª£ng</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for variant in product.productdetail_set.all %}
                                <tr>
                                    <td>{{variant.color}}</td>
                                    <td>{{variant.size}}</td>
                                    <td>{{variant.quantity}}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <h5 class="my-4">ƒê√°nh gi√° s·∫£n ph·∫©m</h5>
        {% if feedbacks %}
        {% for feedback in feedbacks %}
        <div class="feedback mt-4">
            <div class="product-rating__item">
                <div class="d-flex mt-4">
                    <img class="user-image-rate" src="{{feedback.customer.avatar.url}}" alt="">
                    <div class="d-flex flex-column ms-3">
                        <div class="">{{feedback.customer.name}}</div>
                        <div class="color-gray">{{feedback.date|date:"H:i d/m/Y"}}</div>
                        <div class="mt-1">
                            {% for i in 5|times %}
                            {% if i <= feedback.rating %}
                            <i class="fa-solid fa-star"></i>
                            {% else %}
                            <i class="fa-regular fa-star"></i>
                            {% endif %}
                            {% endfor %}
                        </div>
                        <div class=" image-feedback-list d-flex mt-3">
                            {% for image in feedback.feedbackimage_set.all %}
                            <div class="image-feedback-item">
                                <img src="{{image.name.url}}" alt="">
                            </div>
                            {% endfor %}
                        </div>
                        <div class="mt-3">
                            {{feedback.comment}}
                        </div>
                        <div class="d-flex align-items-center mt-3">
                            <div class="btn active btn-like"> {{feedback.like}} <i class="fa-solid fa-thumbs-up "></i></div>
                            <div class="btn ms-2  btn-dislike">{{feedback.dislike}} <i class="fa-solid fa-thumbs-down"></i></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-controller">
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    <li class="page-item {% if page_obj.number == 1 %}disabled{% endif %} ">
                        <a class="page-link pre-page" href="/product-detail/{{product.product_id}}?page=1" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    {% if page_obj.has_previous %}
                    <li class="page-item" aria-current="page">
                        <a class="page-link" href="/product-detail/{{product.product_id}}?page={{page_obj.previous_page_number}}">{{page_obj.previous_page_number}}</a>
                    </li>
                    {% endif %}
                    <li class="page-item active">
                        <a class="page-link" href="#">{{page_obj.number}}</a>
                    </li>

                    {% if page_obj.has_next %}
                    <li class="page-item" aria-current="page">
                        <a class="page-link" href="/product-detail/{{product.product_id}}?page={{page_obj.next_page_number}}">{{page_obj.next_page_number}}</a>
                    </li>
                    {% endif %}
                    <li class="page-item">
                        <a class="page-link next-page {% if page_obj.number == 1 %}disabled{% endif %}" href="/product-detail/{{product.product_id}}?page={{page_obj.paginator.num_pages}}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        {% endfor %}
        {% else %}
        <div class='alert alert-danger mt-3 d-flex justify-content-center'>
            Ch∆∞a c√≥ ƒë√°nh gi√° n√†o
        </div>
        {% endif %}

    </div>
</div>
<script>
    $(document).ready(function() {
        $('.expanse-text').click(function() {
            $('.text').toggleClass('show-text');
            if ($('.text').hasClass('show-text')) {
                $('.expanse-text').text('Thu g·ªçn');
            } else {
                $('.expanse-text').text('Xem th√™m');
            }
        })
    });
</script>
{% endblock content %}